(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d1da65e"],{"1bc3":function(t,e,a){},"2e90":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{staticClass:"list__header"},[t._v(t._s(t.header))]),"contacts"!==t.mode?[a("router-link",{staticClass:"list__add btn",attrs:{to:t.pathToAdd}},[a("i",{staticClass:"fas fa-plus-square"}),t._v(" Добавить ")]),t.loading?a("Loader"):a("div",{staticClass:"list__items"},[null!==t.data?t._l(t.data,(function(e,s){return a("div",{key:e.id,staticClass:"list__item"},[a("div",{staticClass:"list__i list__column"},[t._v(t._s(++s))]),a("div",{staticClass:"list__title list__column"},[t._v(t._s(e.title))]),a("router-link",{staticClass:"list__edit list__column",attrs:{to:t.pathToEdit+e.id}},[a("i",{staticClass:"far fa-edit"})]),a("button",{staticClass:"list__delete list__column",attrs:{type:"button"},on:{click:function(a){return t.open(e.title,e.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})])],1)})):t._e()],2)]:[t.loading?a("Loader"):a("div",{staticClass:"list__items"},[null!==t.data?t._l(t.data,(function(e,s){return a("div",{key:e.id,staticClass:"list__item",class:{list__item_new:"new"===e.state}},[a("div",{staticClass:"list__i list__column list__column_contacts"},[t._v(t._s(++s))]),a("div",{staticClass:"list__name list__column list__column_contacts"},[t._v(t._s(e.name))]),a("a",{staticClass:"list__email list__column list__column_contacts",attrs:{href:"mailto:"+e.email}},[t._v(t._s(e.email))]),a("router-link",{staticClass:"list__edit list__column list__column_contacts",attrs:{to:t.pathToView+e.id}},[a("i",{staticClass:"far fa-eye"})]),a("button",{staticClass:"list__delete list__column list__column_contacts",attrs:{type:"button"},on:{click:function(a){return t.open(e.name,e.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})])],1)})):t._e()],2)],a("transition",{attrs:{"enter-active-class":"animate__animated animate__faster animate__flipInX","leave-active-class":"animate__animated animate__faster animate__flipOutX"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}],staticClass:"modal"},[a("div",{staticClass:"modal__text"},[t._v('Вы действительно хотите удалить "'+t._s(t.title)+'"?')]),a("div",{staticClass:"modal__btns"},[a("button",{staticClass:"modal__btn btn close",on:{click:function(e){t.modal=!t.modal}}},[t._v("Отмена")]),a("button",{staticClass:"modal__btn btn del",on:{click:function(e){return t.remove(t.id)}}},[t._v("Удалить")])])])])],2)},i=[],n=(a("96cf"),a("1da1")),c={props:["mode"],mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("services"!==t.mode){e.next=6;break}return e.next=3,t.$store.dispatch("services/loadServices");case 3:t.data=t.$store.getters["services/services"],e.next=15;break;case 6:if("projects"!==t.mode){e.next=12;break}return e.next=9,t.$store.dispatch("projects/LoadProjects");case 9:t.data=t.$store.getters["projects/projects"],e.next=15;break;case 12:return e.next=14,t.$store.dispatch("contacts/loadMails");case 14:t.data=t.$store.getters["contacts/mails"];case 15:t.loading=!1;case 16:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!0,data:[],modal:!1,title:"",id:""}},computed:{header:function(){return"services"===this.mode?"Услуги":"projects"===this.mode?"Проекты":"письма"},pathToAdd:function(){return"services"===this.mode?"/admin/services/add":"/admin/projects/add"},pathToEdit:function(){return"services"===this.mode?"/admin/services/edit/":"/admin/projects/edit/"},pathToView:function(){return"contacts/view/"}},methods:{open:function(t,e){this.modal=!0,this.title="contacts"===this.mode?"письмо от ".concat(t):t,this.id=e},remove:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("services"!==e.mode){a.next=15;break}return a.prev=1,e.loading=!0,a.next=5,e.$store.dispatch("services/deleteServicesById",t);case 5:return a.next=7,e.$store.dispatch("services/loadServices");case 7:e.data=e.$store.getters["services/services"],a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),alert(a.t0);case 13:a.next=42;break;case 15:if("projects"!==e.mode){a.next=30;break}return a.prev=16,e.loading=!0,a.next=20,e.$store.dispatch("projects/deleteProjectById",t);case 20:return a.next=22,e.$store.dispatch("projects/LoadProjects");case 22:e.data=e.$store.getters["projects/projects"],a.next=28;break;case 25:a.prev=25,a.t1=a["catch"](16),alert(a.t1);case 28:a.next=42;break;case 30:return a.prev=30,e.loading=!0,a.next=34,e.$store.dispatch("contacts/deleteMailById",t);case 34:return a.next=36,e.$store.dispatch("contacts/loadMails");case 36:e.data=e.$store.getters["contacts/mails"],a.next=42;break;case 39:a.prev=39,a.t2=a["catch"](30),alert(a.t2);case 42:e.loading=!1,e.modal=!1;case 44:case"end":return a.stop()}}),a,null,[[1,10],[16,25],[30,39]])})))()}}},r=c,o=(a("85a1"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,"b655e8b6",null);e["a"]=l.exports},"85a1":function(t,e,a){"use strict";var s=a("1bc3"),i=a.n(s);i.a},"92df":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{staticClass:"list__header"},[t._v("Контактные данные")]),t.loading?a("Loader"):a("form",{staticClass:"list__edit",on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("div",{staticClass:"list__item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input list__input",attrs:{type:"email",placeholder:"Ваш Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"list__item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"input list__input",attrs:{type:"phone",placeholder:"Ваш телефон"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),a("div",{staticClass:"list__item list__item_file"},[a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/pdf"},on:{change:t.onfilePicked}}),a("button",{staticClass:"btn list__btn",attrs:{type:"button"},on:{click:t.onPickFile}},[t._v("Обновить прайслист")]),""===t.fileName?a("a",{staticClass:"list__filename",attrs:{href:t.price,target:"_blank"}},[t._v("Ссылка на прайс")]):t._e(),a("div",{staticClass:"list__filename"},[t._v(t._s(t.fileName))])]),a("div",{staticClass:"list__item"},[a("button",{staticClass:"btn list__btn",attrs:{type:"submit"}},[t._v("Сохранить")])])]),a("List",{attrs:{mode:"contacts"}})],1)},i=[],n=(a("b0c0"),a("96cf"),a("1da1")),c=a("2e90"),r={mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("contacts/loadContacts");case 2:a=t.$store.getters["contacts/contacts"],t.email=a.email,t.phone=a.phone,t.price=a.price,t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!0,fileName:"",file:null,email:"",phone:"",price:""}},computed:{},methods:{onPickFile:function(){this.$refs.fileInput.click()},onfilePicked:function(t){var e=t.target.files,a=e[0].name;this.fileName=a;var s=new FileReader;s.readAsDataURL(e[0]),this.file=e[0]},save:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.$store.dispatch("contacts/editContacts",{contacts:{email:t.email,phone:t.phone,price:t.price},price:t.file});case 4:return t.file=null,t.fileName="",e.next=8,t.$store.dispatch("contacts/loadContacts");case 8:a=t.$store.getters["contacts/contacts"],t.email=a.email,t.phone=a.phone,t.price=a.price,t.loading=!1,e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),alert(e.t0),t.loading=!1;case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))()}},components:{List:c["a"]}},o=r,l=(a("f21c"),a("2877")),d=Object(l["a"])(o,s,i,!1,null,"2ac07d97",null);e["default"]=d.exports},e491:function(t,e,a){},f21c:function(t,e,a){"use strict";var s=a("e491"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-6d1da65e.2e9909cf.js.map